var t=Object.defineProperty,a=Object.prototype.hasOwnProperty,e=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,l=(a,e,r)=>e in a?t(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,n=(t,n)=>{for(var s in n||(n={}))a.call(n,s)&&l(t,s,n[s]);if(e)for(var s of e(n))r.call(n,s)&&l(t,s,n[s]);return t};import{S as s,i as o,s as i,K as c,c as h,a as f,d,b as g,f as u,L as m,t as $,g as p,E as v,M as y,h as E,J as b,F as w,N as x,O as D,P as k,Q as I,R as V,T as j,U as L,V as O,W as C,X as z,Y as P,Z as _,_ as M,$ as S,a0 as T,a1 as Y,a2 as A,a3 as N,a4 as B,a5 as W,a6 as q,e as F,k as H,n as J,j as K,m as Q,o as R,a7 as U,a8 as X,a9 as Z,v as G,r as tt,w as at,aa as et,x as rt,C as lt,ab as nt,ac as st}from"../../../chunks/vendor-d868d53a.js";import{b as ot}from"../../../chunks/paths-45dac81d.js";import{P as it}from"../../../chunks/PageIntro-27a8d3de.js";function ct(t,a,e){const r=t.slice();return r[16]=a[e],r}function ht(t,a,e){const r=t.slice();return r[19]=a[e],r}function ft(t){let a,e,r,l=[],n=new Map,s=t[3];const o=t=>t[19].key;for(let c=0;c<s.length;c+=1){let a=ht(t,s,c),e=o(a);n.set(e,l[c]=dt(e,a))}let i=t[7],$=[];for(let c=0;c<i.length;c+=1)$[c]=gt(ct(t,i,c));return{c(){a=c("g");for(let t=0;t<l.length;t+=1)l[t].c();e=c("g");for(let t=0;t<$.length;t+=1)$[t].c();this.h()},l(t){a=h(t,"g",{transform:!0},1);var r=f(a);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(d),e=h(t,"g",{transform:!0},1);var n=f(e);for(let a=0;a<$.length;a+=1)$[a].l(n);n.forEach(d),this.h()},h(){g(a,"transform",`translate(${t[9].left}, ${t[9].top})`),g(e,"transform",r="translate("+t[9].left+", "+(t[2]+t[9].top)+")")},m(t,r){u(t,a,r);for(let e=0;e<l.length;e+=1)l[e].m(a,null);u(t,e,r);for(let a=0;a<$.length;a+=1)$[a].m(e,null)},p(t,c){if(104&c&&(s=t[3],l=m(l,c,o,1,t,s,n,a,S,dt,null,ht)),148&c){let a;for(i=t[7],a=0;a<i.length;a+=1){const r=ct(t,i,a);$[a]?$[a].p(r,c):($[a]=gt(r),$[a].c(),$[a].m(e,null))}for(;a<$.length;a+=1)$[a].d(1);$.length=i.length}4&c&&r!==(r="translate("+t[9].left+", "+(t[2]+t[9].top)+")")&&g(e,"transform",r)},d(t){t&&d(a);for(let a=0;a<l.length;a+=1)l[a].d();t&&d(e),b($,t)}}}function dt(t,a){let e,r,l;return{key:t,first:null,c(){e=c("path"),this.h()},l(t){e=h(t,"path",{d:!0,fill:!0},1),f(e).forEach(d),this.h()},h(){g(e,"d",r=a[6](a[19])),g(e,"fill",l=a[5](a[19].key)),this.first=e},m(t,a){u(t,e,a)},p(t,n){a=t,72&n&&r!==(r=a[6](a[19]))&&g(e,"d",r),40&n&&l!==(l=a[5](a[19].key))&&g(e,"fill",l)},d(t){t&&d(e)}}}function gt(t){let a,e,r,l,n,s,o=y("%b %Y")(t[16])+"";return{c(){a=c("g"),e=c("line"),l=c("text"),n=$(o),this.h()},l(t){a=h(t,"g",{transform:!0},1);var r=f(a);e=h(r,"line",{stroke:!0,y2:!0},1),f(e).forEach(d),l=h(r,"text",{"dominant-baseline":!0,fill:!0,"text-anchor":!0,y:!0,"font-size":!0},1);var s=f(l);n=p(s,o),s.forEach(d),r.forEach(d),this.h()},h(){g(e,"stroke","#DEE2E6"),g(e,"y2",r=-t[2]),g(l,"dominant-baseline","hanging"),g(l,"fill","currentColor"),g(l,"text-anchor","middle"),g(l,"y",6),g(l,"font-size","10px"),g(a,"transform",s="translate("+t[4](t[16])+",0)")},m(t,r){u(t,a,r),v(a,e),v(a,l),v(l,n)},p(t,l){4&l&&r!==(r=-t[2])&&g(e,"y2",r),128&l&&o!==(o=y("%b %Y")(t[16])+"")&&E(n,o),144&l&&s!==(s="translate("+t[4](t[16])+",0)")&&g(a,"transform",s)},d(t){t&&d(a)}}}function ut(t){let a,e=t[3].length&&t[0]&&t[1]&&ft(t);return{c(){a=c("svg"),e&&e.c(),this.h()},l(t){a=h(t,"svg",{width:!0,height:!0},1);var r=f(a);e&&e.l(r),r.forEach(d),this.h()},h(){g(a,"width",t[0]),g(a,"height",t[1])},m(t,r){u(t,a,r),e&&e.m(a,null)},p(t,[r]){t[3].length&&t[0]&&t[1]?e?e.p(t,r):(e=ft(t),e.c(),e.m(a,null)):e&&(e.d(1),e=null),1&r&&g(a,"width",t[0]),2&r&&g(a,"height",t[1])},i:w,o:w,d(t){t&&d(a),e&&e.d()}}}function mt(t,a,e){let r,l,n,s,o,i,c,h,f,d,g,{data:u=[]}=a,{width:m}=a,{height:$}=a;const p=x("brushExtent");D(t,p,(t=>e(14,g=t)));const v={top:20,right:0,bottom:20,left:0};return t.$$set=t=>{"data"in t&&e(10,u=t.data),"width"in t&&e(0,m=t.width),"height"in t&&e(1,$=t.height)},t.$$.update=()=>{1&t.$$.dirty&&e(11,r=m-v.left-v.right),2&t.$$.dirty&&e(2,l=$-v.top-v.bottom),1024&t.$$.dirty&&e(12,n=[...new Set(u.map((t=>t.Category)))]),1024&t.$$.dirty&&e(13,s=k(u,(t=>k(t,(t=>t[0].frequency),(t=>t.Category))),(t=>t.date))),12288&t.$$.dirty&&e(3,o=I().keys(n).value(((t,a)=>t[1].has(a)?t[1].get(a):0)).offset(V).order(j)(s)),18432&t.$$.dirty&&e(4,i=L().domain(g).range([0,r])),12&t.$$.dirty&&e(15,c=O().domain([C(o,(t=>C(t,(t=>t[0])))),z(o,(t=>z(t,(t=>t[1]))))]).range([l,0])),4096&t.$$.dirty&&e(5,h=P().domain(n).range(_)),32784&t.$$.dirty&&e(6,f=M().x((t=>i(t.data[0]))).y0((t=>c(t[0]))).y1((t=>c(t[1])))),16&t.$$.dirty&&e(7,d=i.ticks())},[m,$,l,o,i,h,f,d,p,v,u,r,n,s,g,c]}class $t extends s{constructor(t){super(),o(this,t,mt,ut,i,{data:10,width:0,height:1})}}function pt(t,a,e){const r=t.slice();return r[18]=a[e],r}function vt(t,a,e){const r=t.slice();return r[21]=a[e],r}function yt(t){let a,e,r,l,n,s,o=t[6],i=[];for(let c=0;c<o.length;c+=1)i[c]=Et(vt(t,o,c));let m=t[7],$=[];for(let c=0;c<m.length;c+=1)$[c]=bt(pt(t,m,c));return{c(){a=c("g");for(let t=0;t<i.length;t+=1)i[t].c();e=c("g");for(let t=0;t<$.length;t+=1)$[t].c();r=c("g"),l=c("path"),s=c("g"),this.h()},l(t){a=h(t,"g",{transform:!0},1);var n=f(a);for(let a=0;a<i.length;a+=1)i[a].l(n);n.forEach(d),e=h(t,"g",{transform:!0},1);var o=f(e);for(let a=0;a<$.length;a+=1)$[a].l(o);o.forEach(d),r=h(t,"g",{transform:!0},1);var c=f(r);l=h(c,"path",{d:!0,class:!0},1),f(l).forEach(d),c.forEach(d),s=h(t,"g",{},1),f(s).forEach(d),this.h()},h(){g(a,"transform","translate("+t[8].left+", "+t[8].top+")"),g(e,"transform","translate("+t[8].left+", "+(t[9]+t[8].top)+")"),g(l,"d",n=t[10](t[0])),g(l,"class","evolution svelte-pjrhgz"),g(r,"transform","translate("+t[8].left+","+t[8].top+")")},m(n,o){u(n,a,o);for(let t=0;t<i.length;t+=1)i[t].m(a,null);u(n,e,o);for(let t=0;t<$.length;t+=1)$[t].m(e,null);u(n,r,o),v(r,l),u(n,s,o),t[12](s)},p(t,r){if(104&r){let e;for(o=t[6],e=0;e<o.length;e+=1){const l=vt(t,o,e);i[e]?i[e].p(l,r):(i[e]=Et(l),i[e].c(),i[e].m(a,null))}for(;e<i.length;e+=1)i[e].d(1);i.length=o.length}if(656&r){let a;for(m=t[7],a=0;a<m.length;a+=1){const l=pt(t,m,a);$[a]?$[a].p(l,r):($[a]=bt(l),$[a].c(),$[a].m(e,null))}for(;a<$.length;a+=1)$[a].d(1);$.length=m.length}1&r&&n!==(n=t[10](t[0]))&&g(l,"d",n)},d(l){l&&d(a),b(i,l),l&&d(e),b($,l),l&&d(r),l&&d(s),t[12](null)}}}function Et(t){let a,e,r,l,n,s=T("~s")(t[21])+"";return{c(){a=c("g"),e=c("line"),r=c("text"),l=$(s),this.h()},l(t){a=h(t,"g",{class:!0,opacity:!0,transform:!0},1);var n=f(a);e=h(n,"line",{stroke:!0,x2:!0},1),f(e).forEach(d),r=h(n,"text",{"dominant-baseline":!0,"text-anchor":!0,fill:!0,x:!0,"font-size":!0},1);var o=f(r);l=p(o,s),o.forEach(d),n.forEach(d),this.h()},h(){g(e,"stroke","#DEE2E6"),g(e,"x2",t[3]),g(r,"dominant-baseline","middle"),g(r,"text-anchor","end"),g(r,"fill","currentColor"),g(r,"x","-5"),g(r,"font-size","10px"),g(a,"class","tick"),g(a,"opacity","1"),g(a,"transform",n="translate(0,"+t[5](t[21])+")")},m(t,n){u(t,a,n),v(a,e),v(a,r),v(r,l)},p(t,r){8&r&&g(e,"x2",t[3]),64&r&&s!==(s=T("~s")(t[21])+"")&&E(l,s),96&r&&n!==(n="translate(0,"+t[5](t[21])+")")&&g(a,"transform",n)},d(t){t&&d(a)}}}function bt(t){let a,e,r,l,n,s=y("%b %Y")(t[18])+"";return{c(){a=c("g"),e=c("line"),r=c("text"),l=$(s),this.h()},l(t){a=h(t,"g",{transform:!0},1);var n=f(a);e=h(n,"line",{stroke:!0,y2:!0},1),f(e).forEach(d),r=h(n,"text",{"dominant-baseline":!0,fill:!0,"text-anchor":!0,y:!0,"font-size":!0},1);var o=f(r);l=p(o,s),o.forEach(d),n.forEach(d),this.h()},h(){g(e,"stroke","#DEE2E6"),g(e,"y2",-t[9]),g(r,"dominant-baseline","hanging"),g(r,"fill","currentColor"),g(r,"text-anchor","middle"),g(r,"y",6),g(r,"font-size","10px"),g(a,"transform",n="translate("+t[4](t[18])+",0)")},m(t,n){u(t,a,n),v(a,e),v(a,r),v(r,l)},p(t,e){128&e&&s!==(s=y("%b %Y")(t[18])+"")&&E(l,s),144&e&&n!==(n="translate("+t[4](t[18])+",0)")&&g(a,"transform",n)},d(t){t&&d(a)}}}function wt(t){let a,e=t[0].length&&t[1]&&xt&&yt(t);return{c(){a=c("svg"),e&&e.c(),this.h()},l(t){a=h(t,"svg",{width:!0,height:!0},1);var r=f(a);e&&e.l(r),r.forEach(d),this.h()},h(){g(a,"width",t[1]),g(a,"height",xt)},m(t,r){u(t,a,r),e&&e.m(a,null)},p(t,[r]){t[0].length&&t[1]&&xt?e?e.p(t,r):(e=yt(t),e.c(),e.m(a,null)):e&&(e.d(1),e=null),2&r&&g(a,"width",t[1])},i:w,o:w,d(t){t&&d(a),e&&e.d()}}}const xt=100;function Dt(t,a,e){let r,l,n,s,o,i,{data:c=[]}=a,{width:h=0}=a;const f={top:10,right:0,bottom:20,left:30},d=x("brushExtent"),g=x("brushExtentDefault"),u=xt-f.top-f.bottom;let m,$=Y().x((t=>l(t.x))).y((t=>n(t.y)));const p=A.every(1);function v(t){t.selection||d.set(g)}function y(t){const a=t.selection;if(!t.sourceEvent||!a)return;const[e,r]=a.map((t=>p.round(l.invert(t))));W(this).call(i.move,r>e?[e,r].map(l):null),d.set([e,r])}return t.$$set=t=>{"data"in t&&e(0,c=t.data),"width"in t&&e(1,h=t.width)},t.$$.update=()=>{2&t.$$.dirty&&e(3,r=h-f.left-f.right),9&t.$$.dirty&&e(4,l=L().domain(N(c,(t=>t.x))).range([0,r])),1&t.$$.dirty&&e(5,n=O().domain([0,z(c,(t=>t.y))]).range([u,0])),32&t.$$.dirty&&e(6,s=n.ticks(4)),16&t.$$.dirty&&e(7,o=l.ticks()),2&t.$$.dirty&&e(11,i=B().extent([[f.left,f.top],[h-f.right,xt-f.bottom]]).on("brush",y).on("end",v)),2052&t.$$.dirty&&m&&W(m).call(i)},[c,h,m,r,l,n,s,o,f,u,$,i,function(t){q[t?"unshift":"push"]((()=>{m=t,e(2,m)}))}]}class kt extends s{constructor(t){super(),o(this,t,Dt,wt,i,{data:0,width:1})}}function It(t,a,e){const r=t.slice();return r[14]=a[e],r}function Vt(t,a,e){const r=t.slice();return r[17]=a[e],r}function jt(t){let a,e,r,l=t[17]+"";return{c(){a=F("option"),e=$(l),r=H(),this.h()},l(t){a=h(t,"OPTION",{value:!0});var n=f(a);e=p(n,l),r=J(n),n.forEach(d),this.h()},h(){a.__value=t[17],a.value=a.__value},m(t,l){u(t,a,l),v(a,e),v(a,r)},p:w,d(t){t&&d(a)}}}function Lt(t){let a,e,r,l=t[14]+"";return{c(){a=F("option"),e=$(l),r=H(),this.h()},l(t){a=h(t,"OPTION",{value:!0});var n=f(a);e=p(n,l),r=J(n),n.forEach(d),this.h()},h(){a.__value=t[14],a.value=a.__value},m(t,l){u(t,a,l),v(a,e),v(a,r)},p:w,d(t){t&&d(a)}}}function Ot(t){let a,e,r,l,n,s,o,i,c,m,y,E,w,x,D,k,I,V,j,L,O,C,z,P,_,M,S,T,Y,A,N,B,W,q,rt,lt;e=new it({props:{title:t[0].title}});let st=t[7],ot=[];for(let h=0;h<st.length;h+=1)ot[h]=jt(Vt(t,st,h));let ct=t[8],ht=[];for(let h=0;h<ct.length;h+=1)ht[h]=Lt(It(t,ct,h));return P=new $t({props:{width:t[4],height:t[5],data:t[6]}}),W=new kt({props:{width:t[4],data:t[3]}}),{c(){a=F("div"),K(e.$$.fragment),r=H(),l=F("div"),n=F("div"),s=F("div"),o=F("div"),i=F("div"),c=F("label"),m=$("Language"),y=H(),E=F("select");for(let t=0;t<ot.length;t+=1)ot[t].c();w=H(),x=F("div"),D=F("div"),k=F("label"),I=$("Macro category"),V=H(),j=F("select");for(let t=0;t<ht.length;t+=1)ht[t].c();L=H(),O=F("div"),C=F("div"),z=F("div"),K(P.$$.fragment),M=H(),S=F("div"),T=F("div"),Y=F("p"),A=F("small"),N=$("Valid tweets"),B=H(),K(W.$$.fragment),this.h()},l(t){a=h(t,"DIV",{class:!0});var g=f(a);Q(e.$$.fragment,g),g.forEach(d),r=J(t),l=h(t,"DIV",{class:!0});var u=f(l);n=h(u,"DIV",{class:!0});var $=f(n);s=h($,"DIV",{class:!0});var v=f(s);o=h(v,"DIV",{class:!0});var b=f(o);i=h(b,"DIV",{class:!0});var _=f(i);c=h(_,"LABEL",{for:!0,class:!0});var q=f(c);m=p(q,"Language"),q.forEach(d),y=J(_),E=h(_,"SELECT",{class:!0,id:!0,"aria-label":!0});var F=f(E);for(let a=0;a<ot.length;a+=1)ot[a].l(F);F.forEach(d),_.forEach(d),b.forEach(d),w=J(v),x=h(v,"DIV",{class:!0});var H=f(x);D=h(H,"DIV",{class:!0});var K=f(D);k=h(K,"LABEL",{for:!0,class:!0});var R=f(k);I=p(R,"Macro category"),R.forEach(d),V=J(K),j=h(K,"SELECT",{class:!0,id:!0,"aria-label":!0});var U=f(j);for(let a=0;a<ht.length;a+=1)ht[a].l(U);U.forEach(d),K.forEach(d),H.forEach(d),v.forEach(d),L=J($),O=h($,"DIV",{class:!0});var X=f(O);C=h(X,"DIV",{class:!0});var Z=f(C);z=h(Z,"DIV",{class:!0});var G=f(z);Q(P.$$.fragment,G),G.forEach(d),Z.forEach(d),X.forEach(d),M=J($),S=h($,"DIV",{class:!0});var tt=f(S);T=h(tt,"DIV",{class:!0});var at=f(T);Y=h(at,"P",{class:!0});var et=f(Y);A=h(et,"SMALL",{});var rt=f(A);N=p(rt,"Valid tweets"),rt.forEach(d),et.forEach(d),B=J(at),Q(W.$$.fragment,at),at.forEach(d),tt.forEach(d),$.forEach(d),u.forEach(d),this.h()},h(){g(a,"class","container"),g(c,"for","language"),g(c,"class","form-label"),g(E,"class","form-select"),g(E,"id","language"),g(E,"aria-label","Language"),void 0===t[1]&&nt((()=>t[11].call(E))),g(i,"class","mb-3"),g(o,"class","col-md-3"),g(k,"for","macroCategory"),g(k,"class","form-label"),g(j,"class","form-select"),g(j,"id","macroCategory"),g(j,"aria-label","macroCategory"),void 0===t[2]&&nt((()=>t[12].call(j))),g(D,"class","mb-3"),g(x,"class","col-md-4"),g(s,"class","row border-bottom py-2"),g(z,"class","w-100 h-100"),nt((()=>t[13].call(z))),g(C,"class","col-12"),g(O,"class","row flex-grow-1"),g(Y,"class","text-muted mb-0"),g(T,"class","col-12"),g(S,"class","row py-2 border-top"),g(n,"class","container h-100 d-flex flex-column"),g(l,"class","bg-light w-100 containerViz svelte-11zrb3w")},m(h,f){u(h,a,f),R(e,a,null),u(h,r,f),u(h,l,f),v(l,n),v(n,s),v(s,o),v(o,i),v(i,c),v(c,m),v(i,y),v(i,E);for(let t=0;t<ot.length;t+=1)ot[t].m(E,null);U(E,t[1]),v(s,w),v(s,x),v(x,D),v(D,k),v(k,I),v(D,V),v(D,j);for(let t=0;t<ht.length;t+=1)ht[t].m(j,null);U(j,t[2]),v(n,L),v(n,O),v(O,C),v(C,z),R(P,z,null),_=X(z,t[13].bind(z)),v(n,M),v(n,S),v(S,T),v(T,Y),v(Y,A),v(A,N),v(T,B),R(W,T,null),q=!0,rt||(lt=[Z(E,"change",t[11]),Z(j,"change",t[12])],rt=!0)},p(t,[a]){const r={};if(1&a&&(r.title=t[0].title),e.$set(r),128&a){let e;for(st=t[7],e=0;e<st.length;e+=1){const r=Vt(t,st,e);ot[e]?ot[e].p(r,a):(ot[e]=jt(r),ot[e].c(),ot[e].m(E,null))}for(;e<ot.length;e+=1)ot[e].d(1);ot.length=st.length}if(130&a&&U(E,t[1]),256&a){let e;for(ct=t[8],e=0;e<ct.length;e+=1){const r=It(t,ct,e);ht[e]?ht[e].p(r,a):(ht[e]=Lt(r),ht[e].c(),ht[e].m(j,null))}for(;e<ht.length;e+=1)ht[e].d(1);ht.length=ct.length}260&a&&U(j,t[2]);const l={};16&a&&(l.width=t[4]),32&a&&(l.height=t[5]),64&a&&(l.data=t[6]),P.$set(l);const n={};16&a&&(n.width=t[4]),8&a&&(n.data=t[3]),W.$set(n)},i(t){q||(G(e.$$.fragment,t),G(P.$$.fragment,t),G(W.$$.fragment,t),q=!0)},o(t){tt(e.$$.fragment,t),tt(P.$$.fragment,t),tt(W.$$.fragment,t),q=!1},d(t){t&&d(a),at(e),t&&d(r),t&&d(l),b(ot,t),b(ht,t),at(P),_(),at(W),rt=!1,et(lt)}}}async function Ct({page:t,fetch:a}){const e=ot+t.path,r=await a(`${e}/data.json`),l=await a(`${e}.json`),n=await l.json();return{props:{emotions:(await r.json()).emotions,info:n.data}}}function zt(t,a,e){let r,l,s,o,i,{emotions:c}=a,{info:h}=a,f=Object.keys(c),d=f[0],g=["all",...new Set(c[d].evolution.map((t=>t.Macrocategory)))],u=g[0];return t.$$set=t=>{"emotions"in t&&e(9,c=t.emotions),"info"in t&&e(0,h=t.info)},t.$$.update=()=>{518&t.$$.dirty&&e(6,r=c[d].evolution.map((t=>n(n({},t),{date:new Date(t.date)}))).filter((t=>"all"===u||u===t.Macrocategory))),514&t.$$.dirty&&e(3,l=c[d].valid.map((t=>({y:t.value,x:new Date(t.Date)})))),8&t.$$.dirty&&rt("brushExtentDefault",N(l,(t=>t.x))),8&t.$$.dirty&&e(10,s=lt(N(l,(t=>t.x)))),1024&t.$$.dirty&&rt("brushExtent",s)},[h,d,u,l,o,i,r,f,g,c,s,function(){d=st(this),e(1,d),e(7,f)},function(){u=st(this),e(2,u),e(8,g)},function(){o=this.clientWidth,i=this.clientHeight,e(4,o),e(5,i)}]}export default class extends s{constructor(t){super(),o(this,t,zt,Ot,i,{emotions:9,info:0})}}export{Ct as load};
